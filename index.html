<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Page Title</title>
	<link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./main.css">
</head>
	<body>
		<nav class="navbar navbar-light bg-light justify-content-between">
  		<a class="navbar-brand">Cognnito UserPool -> Cognito Identity Pool -> S3</a>
		</nav>
		<!-- Main Webpage container -->
		<section class="container">
			<!-- Second Row -->
			<div class="row">
				<!-- Sign In Box -->
				<div class="text-center mb-4 col-12">
					<h6 class="h6 mb-3 font-weight-normal">Please ensure you fill in the neccessary AWS variables at the top of the 'src/main.js' before using the demo application</h6>
				</div>
	      <div class="feature-box col-8">
	            	<!-- Box Description -->
					<div class="text-center mb-4 col-12">
				      	<h1 class="h3 mb-3 font-weight-normal">Sign In</h1>
				  </div>
					<div class="mb-4 col-12">
						<p>Sign in with your username and password of a user in your Userpool. After a succesful authentication you will obtain an ID, Access and Refresh token </p>
					</div>
				    <!-- Username Input Field -->
				    <div class="form-label-group col-12">
				        <input type="text" id="uname" class="form-control" name="uname" placeholder="Username" required autofocus>
				        <label for="uname">Username</label>
				    </div>
					<!-- Password Input Field -->
				    <div class="form-label-group col-12" >
				        <input type="password" id="pwd" class="form-control" name="pwd" placeholder="Password" required>
				        <label for="pwd">Password</label>
				    </div>
				    <button type="button" class="btn btn-success btn-md btn-block" id="buttonSignin">Sign In</button>

						<div id="tokenDisplay">
							<h6>ID TOKEN:</h6>
							<div id="idTokenDisplay"></div>
						</div>
						<div id="tokenDisplay">
							<h6>ACCESS TOKEN:</h6>
							<div id="accessTokenDisplay"></div>
						</div>
						<div id="tokenDisplay">
							<h6>REFRESH TOKEN:</h6>
							<div id="refreshTokenDisplay"></div>
						</div>
			 </div>

			</div>
			<div class="row">
				<!-- Sign In Box -->
	            <div class="feature-box col-8">
	            	<!-- Box Description -->
					<div class="text-center mb-4 col-12">
				      	<h1 class="h3 mb-3 font-weight-normal">Get Temp Credentials</h1>
				    </div>
						<div class="mb-4 col-12">
					      <p>The below IAM policy shows how you can restrict access for a single idenitity (authenticated user) to only be able to access resources in your S3 bucket that belong to them. The user will only have S3 GET permissions to access S3 objects in your S3 bucket which have a prefix of the Identity ID of the user. This Identity ID of the user will be displayed below after recieving temporary credentials.</p>
								<pre id="iamPolicyDisplay"></pre>
					  </div>
				    <button type="button" class="btn btn-success btn-md btn-block" id="buttonGetCreds">Get Credentials</button>
						<div id="tokenDisplay">
							<h6>Identity ID:</h6>
							<div id="identityIdDisplay" style="color:red; font-weight: bold;"></div>
						</div>
						<div id="tokenDisplay">
							<h6>Access Key ID:</h6>
							<div id="accessKeyDisplay"></div>
						</div>
						<div id="tokenDisplay">
							<h6>Secret Access Key:</h6>
							<div id="secretKeyDisplay"></div>
						</div>
						<div id="tokenDisplay">
							<h6>Session Token</h6>
							<div id="sessionTokenDisplay"></div>
						</div>
			    </div>

			</div>

			<div class="row">
				<!-- Sign In Box -->
	        <div class="feature-box col-8">
	            	<!-- Box Description -->
						<div class="text-center mb-4 col-12">
				      	<h1 class="h3 mb-3 font-weight-normal">Get S3 object using Temp credentials</h1>
				    </div>
						<div class="mb-4 col-12">
					    <p>Enter the full S3 object of the object you would like to get fromn S3. For this demo, the application is ecpecting to recieve a '.jpeg' image. After recievinng the image, it will display it in the box below.</p><br>
							If you gave your identity pool and authenticed IAM role, like above under 'Get Credentials', you should only be able to access s3 objects in your S3 bucket that have ann s3 object key similar to below:<br>
						<b>"us-east-1:88859bc9-0149-4183-bf10-39e36EXAMPLE/dog.jpeg"</b>(identityID/ObjectName)</p>

					  </div>
						<div class="form-label-group col-12">
							 <input type="text" id="s3fullkey" class="form-control" name="s3fullkey" placeholder="s3 full Object Key" required autofocus>
							 <label for="s3key">S3 full Object Key</label>
					 </div>
				    <button type="button" class="btn btn-success btn-md btn-block" id="buttonGetObject">Get Object</button>
						<div id="s3tokenDisplay">
							<h6>S3 Object:</h6>
							<img id="s3img" src=""/>
						</div>
			    </div>
			</div>
			<!-- End of Authenticated Row -->
	    </section>
	    <!-- End of Main Webpage container -->
	    <script src="./library/jquery-3.3.1.min.js"></script>
	    <!-- AWS SDK's -->
		<script src="./library/amazon-cognito-identity.min.js"></script>
		<script src="./library/aws-sdk-2.450.0.min.js"></script>
		<!-- Custom Scripts -->
		<script src="./scripts/main.js"></script>
	</body>
</html>
